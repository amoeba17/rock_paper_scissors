<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>
            const choices = ['Rock', 'Paper', 'Scissors']; 

            function computerPlay() {
                choice = choices[Math.floor(Math.random() * choices.length)];
                return choice;
            }

            function playRound(playerSelection, computerSelection) {
                // reformat playerSelection so that it is case-insensitive
                playerSelection = playerSelection[0].toUpperCase() + playerSelection.substring(1).toLowerCase();
                console.log('Player selection: ' + playerSelection);
                console.log('Computer selection: '+ computerSelection);

                var result; // 0=tie, 1=win, -1=lose
                if (playerSelection == 'Rock') {
                    if (computerSelection == 'Rock') {
                        result = 0;
                    } else if (computerSelection == 'Paper') {
                        result = -1;
                    } else { // computerSelection == 'Scissors'
                        result = 1;
                    }
                } else if (playerSelection == 'Paper') {
                    if (computerSelection == 'Rock') {
                        result = 1;
                    } else if (computerSelection == 'Paper') {
                        result = 0;
                    } else { // computerSelection == 'Scissors'
                        result = -1;
                    }
                } else { // playerSelection == 'Scissors'
                    if (computerSelection == 'Rock') {
                        result = -1;
                    } else if (computerSelection == 'Paper') {
                        result = 1;
                    } else { // computerSelection == 'Scissors'
                        result = 0;
                    }
                }

                return result;
            }

            function game() {
                let playerScore = 0;
                let computerScore = 0;
                for (let i = 0; i < 5; i++) {
                    let input;
                    do {
                        input = prompt('Rock/Paper/Scissors: ').toLowerCase();
                    } while (input != 'rock' && input != 'scissors' && input != 'paper');

                    let playerSelection = input;
                    let computerSelection = computerPlay();
                    let result = playRound(playerSelection, computerSelection);
                    if (result == 1) {
                        alert(`You win! ${playerSelection} beats ${computerSelection}.`);
                        playerScore++;
                        if (playerScore >= 3) {
                            return 'You won the game!';
                        }
                    } else if (result == -1) {
                        alert(`You lose! ${computerSelection} beats ${playerSelection}.`);
                        computerScore++;
                        if (computerScore >= 3) {
                            return 'You lost the game :{';
                        }
                    } else { // result == 0
                        alert("It's a tie!");
                        i--;
                    }
                }
                return 'unexpected return';
            }

            alert(game());
            </script>
    </body>
</html>